{% extends "base.html" %}

{% block title %}{{ course.name }} - Dev Learning Hub{% endblock %}

{% block content %}
<div class="course-detail-container">
    <div class="course-header" style="--course-color: {{ course.color }}">
        <div class="course-info">
            <div class="course-icon-large">{{ course.icon }}</div>
            <div class="course-details">
                <h1>{{ course.name }}</h1>
                <p class="course-description">{{ course.description }}</p>
                <div class="course-meta">
                    <span class="difficulty {{ course.difficulty.lower() }}">
                        <i class="fas fa-signal"></i>
                        {{ course.difficulty }}
                    </span>
                    <span class="lessons-count">
                        <i class="fas fa-book"></i>
                        {{ lessons|length }} le√ßons
                    </span>
                </div>
            </div>
        </div>
        
        <div class="course-progress-summary">
            {% set completed_count = user_progress.values() | select | list | length %}
            {% set progress_percentage = (completed_count / lessons|length * 100) if lessons|length > 0 else 0 %}
            
            <div class="progress-circle">
                <svg viewBox="0 0 36 36" class="circular-chart">
                    <path class="circle-bg" d="M18 2.0845
                        a 15.9155 15.9155 0 0 1 0 31.831
                        a 15.9155 15.9155 0 0 1 0 -31.831"/>
                    <path class="circle" stroke-dasharray="{{ progress_percentage }}, 100" d="M18 2.0845
                        a 15.9155 15.9155 0 0 1 0 31.831
                        a 15.9155 15.9155 0 0 1 0 -31.831"/>
                    <text x="18" y="20.35" class="percentage">{{ "%.0f"|format(progress_percentage) }}%</text>
                </svg>
            </div>
            
            <div class="progress-info">
                <span>{{ completed_count }}/{{ lessons|length }} le√ßons</span>
                {% if progress_percentage == 100 %}
                    <span class="completed-badge">
                        <i class="fas fa-crown"></i>
                        Cours termin√© !
                    </span>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Section de pr√©sentation enrichie -->
    <div class="course-overview-section">
        <div class="overview-grid">
            <div class="course-introduction">
                <h2><i class="fas fa-info-circle"></i> √Ä propos de ce cours</h2>
                <div class="intro-content">
                    {% if course.id == 1 %}
                        <p>Le terminal est l'interface en ligne de commande qui vous permet d'interagir directement avec votre syst√®me d'exploitation. C'est un outil fondamental que tout d√©veloppeur doit ma√Ætriser car il offre une puissance et une flexibilit√© in√©gal√©es.</p>
                        <p><strong>Pourquoi apprendre le terminal ?</strong> Il vous permettra d'automatiser des t√¢ches, de g√©rer des serveurs distants, d'utiliser des outils de d√©veloppement avanc√©s et de travailler efficacement dans n'importe quel environnement de d√©veloppement.</p>
                    {% elif course.id == 2 %}
                        <p>HTML5 est la derni√®re version du langage de balisage qui structure le web. Il apporte de nouvelles balises s√©mantiques, des APIs puissantes et une meilleure int√©gration multim√©dia.</p>
                        <p><strong>L'√©volution du web</strong> : HTML5 r√©volutionne la fa√ßon dont nous cr√©ons des sites web en offrant des fonctionnalit√©s natives pour la vid√©o, l'audio, le stockage local et bien plus encore, r√©duisant ainsi la d√©pendance aux plugins externes.</p>
                    {% elif course.id == 3 %}
                        <p>CSS3 transforme vos pages HTML en interfaces visuellement attrayantes et fonctionnelles. Il introduit des fonctionnalit√©s avanc√©es comme les animations, les transformations et les layouts flexibles.</p>
                        <p><strong>Le design moderne</strong> : Avec CSS3, vous pouvez cr√©er des interfaces responsives qui s'adaptent √† tous les √©crans, des smartphones aux √©crans ultra-larges, tout en maintenant une exp√©rience utilisateur optimale.</p>
                    {% elif course.id == 4 %}
                        <p>JavaScript est le langage de programmation qui donne vie au web. Il permet de cr√©er des interactions dynamiques, de manipuler le contenu en temps r√©el et de d√©velopper des applications compl√®tes.</p>
                        <p><strong>Un langage universel</strong> : JavaScript s'ex√©cute partout - dans le navigateur, sur le serveur avec Node.js, dans les applications mobiles et m√™me dans l'IoT. C'est devenu l'un des langages les plus demand√©s au monde.</p>
                    {% elif course.id == 5 %}
                        <p>Git est le syst√®me de contr√¥le de version le plus utilis√© au monde. Il permet de suivre les modifications de votre code, de collaborer avec d'autres d√©veloppeurs et de g√©rer l'historique de vos projets.</p>
                        <p><strong>Collaboration moderne</strong> : Git facilite le travail en √©quipe, la gestion des versions et le d√©ploiement de logiciels. C'est un outil indispensable dans l'√©cosyst√®me de d√©veloppement moderne.</p>
                    {% else %}
                        <p>{{ course.description }}</p>
                    {% endif %}
                </div>
            </div>

            <div class="course-prerequisites">
                <h3><i class="fas fa-list-check"></i> Pr√©requis</h3>
                <ul class="prerequisites-list">
                    {% if course.id == 1 %}
                        <li>Aucun pr√©requis - cours accessible aux d√©butants</li>
                        <li>Ordinateur avec syst√®me d'exploitation (Windows, macOS, Linux)</li>
                        <li>Motivation pour apprendre les bases du d√©veloppement</li>
                    {% elif course.id == 2 %}
                        <li>Connaissances de base en informatique</li>
                        <li>Familiarit√© avec la navigation sur internet</li>
                        <li>√âditeur de texte ou IDE install√©</li>
                    {% elif course.id == 3 %}
                        <li>Ma√Ætrise des bases HTML5</li>
                        <li>Compr√©hension de la structure d'une page web</li>
                        <li>Notions de design et d'esth√©tique (optionnel)</li>
                    {% elif course.id == 4 %}
                        <li>Solides bases en HTML5 et CSS3</li>
                        <li>Logique de programmation (boucles, conditions)</li>
                        <li>Patience pour d√©boguer du code !</li>
                    {% elif course.id == 5 %}
                        <li>Ma√Ætrise du terminal/ligne de commande</li>
                        <li>Exp√©rience avec un projet de code</li>
                        <li>Compr√©hension des concepts de fichiers et dossiers</li>
                    {% endif %}
                </ul>
            </div>

            <div class="learning-outcomes">
                <h3><i class="fas fa-graduation-cap"></i> Ce que vous saurez faire</h3>
                <ul class="outcomes-list">
                    {% if course.id == 1 %}
                        <li>Naviguer efficacement dans le syst√®me de fichiers</li>
                        <li>G√©rer les permissions et les utilisateurs</li>
                        <li>Automatiser des t√¢ches avec des scripts simples</li>
                        <li>Utiliser des outils de d√©veloppement en ligne de commande</li>
                        <li>Surveiller et g√©rer les processus syst√®me</li>
                    {% elif course.id == 2 %}
                        <li>Cr√©er des pages web structur√©es et s√©mantiques</li>
                        <li>Int√©grer du contenu multim√©dia (vid√©o, audio)</li>
                        <li>D√©velopper des formulaires interactifs et accessibles</li>
                        <li>Utiliser les APIs HTML5 modernes</li>
                        <li>Optimiser vos pages pour le SEO</li>
                    {% elif course.id == 3 %}
                        <li>Designer des interfaces modernes et attractives</li>
                        <li>Cr√©er des layouts responsives avec Flexbox et Grid</li>
                        <li>Animer vos interfaces avec CSS3</li>
                        <li>Optimiser les performances de rendu</li>
                        <li>Utiliser des m√©thodologies CSS professionnelles</li>
                    {% elif course.id == 4 %}
                        <li>Programmer des interactions utilisateur complexes</li>
                        <li>Manipuler le DOM en temps r√©el</li>
                        <li>G√©rer l'asynchrone avec les Promises</li>
                        <li>D√©boguer efficacement votre code JavaScript</li>
                        <li>Structurer des applications JavaScript modulaires</li>
                    {% elif course.id == 5 %}
                        <li>G√©rer l'historique de vos projets de code</li>
                        <li>Collaborer efficacement en √©quipe</li>
                        <li>R√©soudre les conflits de fusion</li>
                        <li>Utiliser GitHub/GitLab professionnellement</li>
                        <li>Mettre en place des workflows de d√©veloppement</li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>

    <div class="lessons-section">
        <h2>
            <i class="fas fa-list"></i>
            Le√ßons du cours
        </h2>
        
        <div class="lessons-list">
            {% for lesson in lessons %}
            <div class="lesson-card {% if user_progress[lesson.id] %}completed{% endif %}">
                <div class="lesson-number">
                    {% if user_progress[lesson.id] %}
                        <i class="fas fa-check"></i>
                    {% else %}
                        {{ lesson.order }}
                    {% endif %}
                </div>
                
                <div class="lesson-content">
                    <h3>{{ lesson.title }}</h3>
                    <p>{{ lesson.content[:100] }}{% if lesson.content|length > 100 %}...{% endif %}</p>
                    
                    <div class="lesson-meta">
                        <span class="points-reward">
                            <i class="fas fa-star"></i>
                            +{{ lesson.points_reward }} points
                        </span>
                        {% if user_progress[lesson.id] %}
                            <span class="completed-indicator">
                                <i class="fas fa-check-circle"></i>
                                Compl√©t√©e
                            </span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="lesson-actions">
                    <a href="{{ url_for('lesson_detail', lesson_id=lesson.id) }}" 
                       class="btn {% if user_progress[lesson.id] %}btn-secondary{% else %}btn-primary{% endif %}">
                        {% if user_progress[lesson.id] %}
                            <i class="fas fa-eye"></i>
                            R√©viser
                        {% else %}
                            <i class="fas fa-play"></i>
                            Commencer
                        {% endif %}
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Section ressources et outils -->
    <div class="course-resources-section">
        <h2><i class="fas fa-toolbox"></i> Outils et ressources</h2>
        <div class="resources-grid">
            <div class="tools-section">
                <h3><i class="fas fa-wrench"></i> Outils recommand√©s</h3>
                <div class="tools-list">
                    {% if course.id == 1 %}
                        <div class="tool-item">
                            <div class="tool-icon">üñ•Ô∏è</div>
                            <div class="tool-info">
                                <h4>Terminal natif</h4>
                                <p>Terminal int√©gr√© de votre OS (CMD, PowerShell, bash)</p>
                            </div>
                        </div>
                        <div class="tool-item">
                            <div class="tool-icon">üíª</div>
                            <div class="tool-info">
                                <h4>Windows Terminal</h4>
                                <p>Terminal moderne pour Windows avec onglets et personnalisation</p>
                            </div>
                        </div>
                    {% elif course.id == 2 %}
                        <div class="tool-item">
                            <div class="tool-icon">üîß</div>
                            <div class="tool-info">
                                <h4>VS Code</h4>
                                <p>√âditeur gratuit avec excellent support HTML5</p>
                            </div>
                        </div>
                        <div class="tool-item">
                            <div class="tool-icon">üåê</div>
                            <div class="tool-info">
                                <h4>Live Server</h4>
                                <p>Extension pour pr√©visualiser vos pages en temps r√©el</p>
                            </div>
                        </div>
                    {% elif course.id == 3 %}
                        <div class="tool-item">
                            <div class="tool-icon">üé®</div>
                            <div class="tool-info">
                                <h4>Chrome DevTools</h4>
                                <p>Outils de d√©veloppement pour d√©boguer CSS</p>
                            </div>
                        </div>
                        <div class="tool-item">
                            <div class="tool-icon">üì±</div>
                            <div class="tool-info">
                                <h4>Responsive Design Mode</h4>
                                <p>Testez vos designs sur diff√©rentes tailles d'√©cran</p>
                            </div>
                        </div>
                    {% elif course.id == 4 %}
                        <div class="tool-item">
                            <div class="tool-icon">üîç</div>
                            <div class="tool-info">
                                <h4>Browser DevTools</h4>
                                <p>Console JavaScript et d√©bogueur int√©gr√©</p>
                            </div>
                        </div>
                        <div class="tool-item">
                            <div class="tool-icon">üì¶</div>
                            <div class="tool-info">
                                <h4>Node.js & npm</h4>
                                <p>Environnement d'ex√©cution et gestionnaire de paquets</p>
                            </div>
                        </div>
                    {% elif course.id == 5 %}
                        <div class="tool-item">
                            <div class="tool-icon">üåø</div>
                            <div class="tool-info">
                                <h4>Git</h4>
                                <p>Outil de contr√¥le de version (installation requise)</p>
                            </div>
                        </div>
                        <div class="tool-item">
                            <div class="tool-icon">üêô</div>
                            <div class="tool-info">
                                <h4>GitHub Desktop</h4>
                                <p>Interface graphique pour Git (optionnel)</p>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="references-section">
                <h3><i class="fas fa-book-open"></i> R√©f√©rences et documentation</h3>
                <div class="references-list">
                    {% if course.id == 1 %}
                        <div class="reference-item">
                            <h4>üîó Bash Manual</h4>
                            <p>Documentation officielle du shell Bash</p>
                        </div>
                        <div class="reference-item">
                            <h4>üìö Command Line Cheat Sheet</h4>
                            <p>Aide-m√©moire des commandes essentielles</p>
                        </div>
                    {% elif course.id == 2 %}
                        <div class="reference-item">
                            <h4>üîó MDN HTML Reference</h4>
                            <p>Documentation compl√®te des √©l√©ments HTML5</p>
                        </div>
                        <div class="reference-item">
                            <h4>üìã HTML5 Validator</h4>
                            <p>Outil pour valider la conformit√© de votre code</p>
                        </div>
                    {% elif course.id == 3 %}
                        <div class="reference-item">
                            <h4>üîó CSS Reference MDN</h4>
                            <p>Guide complet des propri√©t√©s CSS3</p>
                        </div>
                        <div class="reference-item">
                            <h4>üéÆ Flexbox Froggy</h4>
                            <p>Jeu interactif pour apprendre Flexbox</p>
                        </div>
                    {% elif course.id == 4 %}
                        <div class="reference-item">
                            <h4>üîó JavaScript MDN</h4>
                            <p>Documentation officielle de JavaScript</p>
                        </div>
                        <div class="reference-item">
                            <h4>üìñ You Don't Know JS</h4>
                            <p>S√©rie de livres approfondis sur JavaScript</p>
                        </div>
                    {% elif course.id == 5 %}
                        <div class="reference-item">
                            <h4>üîó Git Documentation</h4>
                            <p>Guide officiel et complet de Git</p>
                        </div>
                        <div class="reference-item">
                            <h4>üéØ Git Workflow Guide</h4>
                            <p>Meilleures pratiques pour le travail en √©quipe</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="course-actions">
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i>
            Retour au dashboard
        </a>
        
        {% if progress_percentage < 100 %}
            {% set next_lesson = lessons | selectattr('id', 'in', user_progress.keys() | reject | list) | first %}
            {% if next_lesson %}
                <a href="{{ url_for('lesson_detail', lesson_id=next_lesson.id) }}" class="btn btn-primary">
                    <i class="fas fa-play"></i>
                    Prochaine le√ßon
                </a>
            {% endif %}
        {% else %}
            <div class="completion-message">
                <i class="fas fa-trophy"></i>
                <span>F√©licitations ! Vous avez termin√© ce cours !</span>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
